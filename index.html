<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Critical for mobile -->
    <title>Start-Up Manifesto (Landscape)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- HTML2Canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        canvas {
            touch-action: none; 
            cursor: crosshair;
        }

        /* LANDSCAPE A4 DIMENSIONS */
        .a4-landscape {
            width: 100%;
            max-width: 297mm;
            min-height: 210mm;
            aspect-ratio: 297/210;
        }
    </style>
</head>
<body class="bg-slate-900 min-h-screen p-4 flex flex-col items-center justify-start gap-6">

    <!-- Header / Intro -->
    <div class="text-center text-white mt-4 mb-2">
        <h1 class="text-2xl font-bold tracking-wider text-emerald-400">MANIFESTO</h1>
        <p class="text-slate-400 text-sm">Our non-negotiables</p>
    </div>

    <!-- MAIN MANIFESTO CARD (LANDSCAPE) -->
    <div id="manifesto-card" class="a4-landscape bg-white p-8 rounded-sm shadow-2xl relative overflow-hidden flex flex-col mx-auto">
        
        <!-- Decorative Border -->
        <div class="absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-slate-800 to-emerald-500"></div>
        <div class="absolute bottom-0 right-0 w-full h-2 bg-slate-100"></div>

        <!-- MAIN GRID LAYOUT (50/50 SPLIT) -->
        <div class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-10 h-full">
            
            <!-- LEFT COLUMN: BRAND IDENTITY -->
            <div class="flex flex-col h-full border-r border-slate-100 pr-8">
                <!-- Header -->
                <header class="mb-6 mt-2">
                    <h2 class="text-xs font-bold text-slate-500 tracking-[0.3em] uppercase mb-1">Official Document</h2>
                    <h1 class="text-4xl font-black text-slate-800 tracking-tight leading-none">FOUNDERS<br>AGREEMENT</h1>
                </header>

                <!-- Start-Up Name -->
                <div class="mb-8 group">
                    <label class="block text-xs font-bold text-emerald-600 uppercase mb-1">Start-Up Name</label>
                    <input type="text" id="input-company" placeholder="NAME HERE" 
                        class="w-full text-4xl font-bold text-slate-900 border-b-4 border-slate-200 focus:border-emerald-500 outline-none transition-colors py-1 placeholder-slate-300 bg-transparent uppercase">
                </div>

                <!-- Big Poster Area (Fills remaining space) -->
                <div class="flex-grow flex flex-col relative">
                    <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Team Identity</label>
                    <div class="relative w-full flex-grow bg-slate-50 border-2 border-dashed border-slate-300 rounded-lg overflow-hidden flex flex-col items-center justify-center group hover:border-emerald-400 transition-colors cursor-pointer min-h-[200px]" id="image-drop-zone">
                        <input type="file" id="poster-upload" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20">
                        
                        <div id="upload-placeholder" class="text-center p-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-slate-400 group-hover:text-emerald-500 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="text-sm font-medium text-slate-500 group-hover:text-emerald-600">Upload Logo/Poster</span>
                        </div>
                        <img id="poster-preview" class="absolute inset-0 w-full h-full object-cover hidden z-10" alt="Team Poster">
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: TERMS & EXECUTION (Vertical Stack) -->
            <div class="flex flex-col h-full pt-2">
                
                <!-- 1. The Rules (Top Half of Right Col) -->
                <div class="mb-6 flex-grow">
                    <h3 class="text-sm font-bold text-slate-800 border-b border-slate-200 pb-2 mb-4 flex items-center gap-2">
                        <span class="bg-slate-800 text-white text-[10px] px-2 py-0.5 rounded">TERMS</span>
                        The 4 Golden Rules
                    </h3>
                    
                    <div class="flex flex-col gap-4">
                        <!-- Rule 1 -->
                        <div class="flex items-start gap-2">
                            <label class="w-24 text-[10px] font-bold text-emerald-600 uppercase text-right shrink-0 mt-3">Work Schedule</label>
                            <textarea id="input-rule1" rows="3" placeholder="e.g. Everyone must start at ... and leave at ..." class="w-full text-sm font-medium text-slate-700 bg-slate-50 p-2 rounded border border-slate-200 focus:ring-1 focus:ring-emerald-500 outline-none resize-none"></textarea>
                        </div>
                        
                        <!-- Rule 2 -->
                        <div class="flex items-start gap-2">
                            <label class="w-24 text-[10px] font-bold text-emerald-600 uppercase text-right shrink-0 mt-3">Location</label>
                            <textarea id="input-rule2" rows="3" placeholder="e.g. remote? - on site?" class="w-full text-sm font-medium text-slate-700 bg-slate-50 p-2 rounded border border-slate-200 focus:ring-1 focus:ring-emerald-500 outline-none resize-none"></textarea>
                        </div>

                        <!-- Rule 3 -->
                        <div class="flex items-start gap-2">
                            <label class="w-24 text-[10px] font-bold text-emerald-600 uppercase text-right shrink-0 mt-3">Communication Style</label>
                            <textarea id="input-rule3" rows="3" placeholder="How are you planning to pass information?" class="w-full text-sm font-medium text-slate-700 bg-slate-50 p-2 rounded border border-slate-200 focus:ring-1 focus:ring-emerald-500 outline-none resize-none"></textarea>
                        </div>

                        <!-- Rule 4 -->
                        <div class="flex items-start gap-2">
                            <label class="w-24 text-[10px] font-bold text-emerald-600 uppercase text-right shrink-0 mt-3">Conflict Resolution</label>
                            <textarea id="input-rule4" rows="3" placeholder="e.g. Vote" class="w-full text-sm font-medium text-slate-700 bg-slate-50 p-2 rounded border border-slate-200 focus:ring-1 focus:ring-emerald-500 outline-none resize-none"></textarea>
                        </div>
                    </div>
                </div>

                <!-- 2. The Signatures (Bottom Half of Right Col) -->
                <div>
                    <h3 class="text-sm font-bold text-slate-800 border-b border-slate-200 pb-2 mb-3">Founding Members Execution</h3>
                    
                    <div class="flex flex-col gap-2">
                        <!-- Sig 1 -->
                        <div class="flex items-center gap-3">
                            <div class="text-[9px] font-bold text-slate-400 uppercase w-16 text-right">Founder 1</div>
                            <div class="relative flex-grow">
                                <canvas id="sig1" width="250" height="45" class="bg-slate-50 border-b border-slate-300 w-full"></canvas>
                                <button onclick="clearPad('sig1')" class="absolute top-0 right-0 p-1 text-[8px] text-red-300 hover:text-red-500 font-bold">CLEAR</button>
                            </div>
                        </div>
                        <!-- Sig 2 -->
                        <div class="flex items-center gap-3">
                            <div class="text-[9px] font-bold text-slate-400 uppercase w-16 text-right">Founder 2</div>
                            <div class="relative flex-grow">
                                <canvas id="sig2" width="250" height="45" class="bg-slate-50 border-b border-slate-300 w-full"></canvas>
                                <button onclick="clearPad('sig2')" class="absolute top-0 right-0 p-1 text-[8px] text-red-300 hover:text-red-500 font-bold">CLEAR</button>
                            </div>
                        </div>
                        <!-- Sig 3 -->
                        <div class="flex items-center gap-3">
                            <div class="text-[9px] font-bold text-slate-400 uppercase w-16 text-right">Founder 3</div>
                            <div class="relative flex-grow">
                                <canvas id="sig3" width="250" height="45" class="bg-slate-50 border-b border-slate-300 w-full"></canvas>
                                <button onclick="clearPad('sig3')" class="absolute top-0 right-0 p-1 text-[8px] text-red-300 hover:text-red-500 font-bold">CLEAR</button>
                            </div>
                        </div>
                        <!-- Sig 4 -->
                        <div class="flex items-center gap-3">
                            <div class="text-[9px] font-bold text-slate-400 uppercase w-16 text-right">Founder 4</div>
                            <div class="relative flex-grow">
                                <canvas id="sig4" width="250" height="45" class="bg-slate-50 border-b border-slate-300 w-full"></canvas>
                                <button onclick="clearPad('sig4')" class="absolute top-0 right-0 p-1 text-[8px] text-red-300 hover:text-red-500 font-bold">CLEAR</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="absolute bottom-2 left-8 right-8 text-center pointer-events-none">
            <p class="text-[9px] text-slate-300">Start-Up Manifesto App • Official Record • 2024 Cohort</p>
        </div>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="w-full max-w-md pb-10 mt-4">
        <button id="download-btn" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-6 rounded-lg shadow-lg transform transition active:scale-95 flex items-center justify-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
            Download Landscape Manifesto
        </button>
        <p class="text-slate-500 text-xs text-center mt-2">Make sure everyone has signed before downloading!</p>
    </div>

    <script>
        // --- 1. LOCAL STORAGE PERSISTENCE ---
        const inputIds = ['input-company', 'input-rule1', 'input-rule2', 'input-rule3', 'input-rule4'];

        document.addEventListener('DOMContentLoaded', () => {
            inputIds.forEach(id => {
                const savedValue = localStorage.getItem(id);
                if (savedValue) document.getElementById(id).value = savedValue;
            });
            ['sig1', 'sig2', 'sig3', 'sig4'].forEach(setupCanvas);
        });

        inputIds.forEach(id => {
            document.getElementById(id).addEventListener('input', (e) => {
                localStorage.setItem(id, e.target.value);
            });
        });

        // --- 2. IMAGE UPLOAD ---
        const imageInput = document.getElementById('poster-upload');
        const imagePreview = document.getElementById('poster-preview');
        const uploadPlaceholder = document.getElementById('upload-placeholder');

        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.classList.remove('hidden');
                    uploadPlaceholder.classList.add('hidden');
                }
                reader.readAsDataURL(file);
            }
        });

        // --- 3. CANVAS LOGIC ---
        function setupCanvas(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0; 
            let lastY = 0;

            ctx.lineWidth = 2;
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#1e293b';

            function getPos(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                let clientX = e.touches ? e.touches[0].clientX : e.clientX;
                let clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return {
                    x: (clientX - rect.left) * scaleX,
                    y: (clientY - rect.top) * scaleY
                };
            }

            function startDraw(e) {
                isDrawing = true;
                const pos = getPos(e);
                lastX = pos.x; lastY = pos.y;
            }

            function draw(e) {
                if (!isDrawing) return;
                if(e.type === 'touchmove') e.preventDefault();
                const pos = getPos(e);
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                lastX = pos.x; lastY = pos.y;
            }

            function endDraw() { isDrawing = false; }

            canvas.addEventListener('mousedown', startDraw);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', endDraw);
            canvas.addEventListener('mouseout', endDraw);
            canvas.addEventListener('touchstart', startDraw, { passive: false });
            canvas.addEventListener('touchmove', draw, { passive: false });
            canvas.addEventListener('touchend', endDraw);
        }

        window.clearPad = function(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // --- 4. DOWNLOAD ---
        const downloadBtn = document.getElementById('download-btn');
        const cardArea = document.getElementById('manifesto-card');

        downloadBtn.addEventListener('click', () => {
            const originalText = downloadBtn.innerHTML;
            downloadBtn.innerHTML = "Processing...";
            downloadBtn.disabled = true;

            html2canvas(cardArea, {
                scale: 2, 
                useCORS: true, 
                backgroundColor: '#ffffff',
                logging: false,
                // Landscape Dimensions (approx A4 at 96dpi)
                windowWidth: 1123, 
                windowHeight: 794,
                onclone: (clonedDoc) => {
                    // Extra safety measure: explicitly set value attribute for cloned inputs
                    // This sometimes helps with rendering text that wasn't updated in DOM attributes
                    const inputs = ['input-rule1', 'input-rule2', 'input-rule3', 'input-rule4', 'input-company'];
                    inputs.forEach(id => {
                        const original = document.getElementById(id);
                        const clone = clonedDoc.getElementById(id);
                        if(original && clone) clone.value = original.value;
                    });
                }
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `manifesto-landscape-${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                downloadBtn.innerHTML = originalText;
                downloadBtn.disabled = false;
            }).catch(err => {
                console.error(err);
                alert("Error generating image.");
                downloadBtn.innerHTML = originalText;
                downloadBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
